[build-system]
requires = ["uv_build>=0.9.10,<0.10.0"]
build-backend = "uv_build"

[tool.uv.build-backend]
module-name = "laddu"
module-root = ""
source-include = [
  "laddu/**",
  "pyproject.toml",
  "README.md",
  "MANIFEST.in",
]
source-exclude = ["*.so", "*.pyd", "*.dll", "*.dylib", "*.lib"]
wheel-exclude = ["*.so", "*.pyd", "*.dll", "*.dylib", "*.lib"]

[project]
name = "laddu"
requires-python = ">=3.7"
classifiers = [
  "Programming Language :: Rust",
  "Programming Language :: Python :: Implementation :: CPython",
  "Programming Language :: Python :: Implementation :: PyPy",
  "Development Status :: 4 - Beta",
  "Programming Language :: Python :: 3.7",
  "Programming Language :: Python :: 3.8",
  "Programming Language :: Python :: 3.9",
  "Programming Language :: Python :: 3.10",
  "Programming Language :: Python :: 3.11",
  "Programming Language :: Python :: 3.12",
  "Programming Language :: Python :: 3.13",
  "Programming Language :: Python :: 3.14",
]
version = "0.14.2"
description = "Python bindings for laddu"
license = "MIT"
readme = "README.md"
dependencies = [
  "laddu-cpu == 0.14.1", # x-release-please-version # WARNING: DO NOT EDIT
  "numpy",
]

[project.urls]
Documentation = "https://laddu.readthedocs.io/en/stable/"

[project.optional-dependencies]
docs = ["sphinx", "sphinx-rtd-theme", "sphinx-copybutton"]
pandas = ["pandas"]
polars = ["polars"]
tests = ["pytest", "pytest-cov", "pandas", "polars", "uproot"]
uproot = ["uproot"]
mpi = ["laddu-mpi == 0.14.1"] # x-release-please-version #WARNING:  DO NOT EDIT

[tool.maturin]
bindings = "pyo3"
strip = true
profile = "dist-release"
sdist-include = ['../Cargo.lock']

[tool.coverage.run]
source = ["laddu"]
omit = [
  "tests/*",
  "docs/*",
  "laddu/mpi.py",
  "*/laddu/mpi.py",
]
branch = true

[tool.coverage.report]
fail_under = 85
skip_covered = true
show_missing = true
exclude_lines = [
  "pragma: no cover",
  "@overload",
  "except ImportError",
  "if TYPE_CHECKING:",
  "from typing_extensions import ",
]
